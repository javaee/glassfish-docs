<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-US">

<!--
DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.

Copyright 2008 Sun Microsystems, Inc. All rights reserved.
 
Use is subject to License Terms
-->

<head>

  <meta http-equiv="Content-type" content="text/html; charset=utf-8">
  <!-- ident      "%Z%%M% %I%     %E% SMI" -->

  <title>To Create a JDBC Connection Pool - Sun GlassFish Enterprise Server v3 Administration Console Online Help
  </title>
  <script language="JavaScript1.2">
    linktag = window.parent.frames[0].document.getElementsByTagName('link');
    for (var i = 0; i < linktag.length; i++) {
        if (linktag[i].rel == "stylesheet") {
            var s = "<link rel=" + linktag[i].rel + " type='text/css' href=" + linktag[i].href + " />";
            document.write(s);
        }
    }
  </script>

</head>

<body class="HlpBdy">



<a name="task-jdbcconnectionpoolnew"></a><h4>To Create a JDBC Connection Pool</h4><p>When creating a connection pool with the Administration Console, you are defining the
aspects of a connection to a specific database.</p><h6>Before You Begin</h6><p>To create a connection pool, you must first install and integrate a driver
supporting the JDBC API (JDBC driver). See <a href="task-integratejdbcdriver.html">To Integrate a JDBC Driver</a>.</p><p>The following information is required to create the JDBC connection pool. Gather this
information before proceeding:</p>
<ul><li><p>Database vendor name</p></li>
<li><p>Resource type, such as <tt>javax.sql.DataSource</tt> (local transactions only), <tt>java.sql.ConnectionPoolDataSource</tt> (local transactions, possible performance improvements), and <tt>javax.sql.XADataSource</tt> (global transactions)</p></li>
<li><p>Data source class name</p></li>
<li><p>Required properties, such as the database name (URL), user name, and password</p></li></ul>
<ol>
<li><b>In the navigation tree, select the Common Tasks node.</b><p>The Common Tasks page opens.</p></li>
<li><b>On the Common Tasks page, click the Create New JDBC Connection Pool button.</b><p>The New JDBC Connection Pool (Step 1 of 2) page opens.</p>
<hr><p><b>Note - </b>You can also access the New JDBC Connection Pool page by expanding the
Resources node and the JDBC node, and selecting the Connection Pools node. Then
from the Connection Pools page, click New to create a new connection pool.</p>
<hr>
</li>
<li><b>In the Name field, type a name for the new connection pool.</b><p>This is a required field.</p></li>
<li><b>From the Resource Type drop-down list, select a resource type.</b><p>Choices include <tt>javax.sql.XADataSource</tt> (global transactions), <tt>java.sql.ConnectionPoolDataSource</tt> (local transactions, possible performance improvements),  and <tt>javax.sql.DataSource</tt>
(local transactions only).</p></li>
<li><b>From the Database Vendor drop-down list, select a database vendor.</b></li>
<li><b>Click Next.</b><p>The New JDBC Connection Pool (Step 2 of 2) page opens.</p></li>
<li><b>In the Datasource Classname field, type the name of the vendor-specific class that
implements the DataSource and/or XADataSource APIs.</b><p>This field is usually filled in automatically with the class name associated with the
resource type and database vendor you chose.</p></li>
<li><b>In the Description field, type a short description for the connection pool.</b></li>
<li><b>In the Initial and Minimum Pool Size field, type the minimum number of
connections for this pool.</b><p>This value also determines the number of connections placed in the pool when
the pool is first created or when application server starts. The default value
is 8.</p></li>
<li><b>In the Maximum Pool Size field, type the maximum number of connections for
this pool.</b><p>The default value is 32.</p></li>
<li><b>In the Pool Resize Quantity field, type the number of connections per pool
resizing batch.</b><p>When the pool scales up and scales down toward the maximum and minimum
pool size respectively, it is resized in batches. This value determines the number
of connections in the batch. Making this value too large delays connection creation
and recycling; making it too small will be less efficient. The default value
is 2.</p></li>
<li><b>In the Idle Timeout field, type the maximum amount of time, in seconds,
that a connection can remain idle in the pool.</b><p>After this time expires, the connection is removed from the pool. The default
value is 30.</p></li>
<li><b>In the Max Wait Time field, type the maximum amount of time,
in milliseconds, that the application requesting a connection will wait before getting a connection
timeout.</b><p>The default value is 60,000.</p></li>
<li><b>Select the Connection Validation Required checkbox to enable connection validation.</b><p>Connection validation allows the server to reconnect in case of failure.</p></li>
<li><b>From the Validation Method drop-down list, select a validation method.</b><p>The application server can validate database connections in three ways: auto-commit, metadata, and
table.</p><dl><dt>Auto-commit and metadata</dt>
<dd><p>The application server validates a connection by calling the <tt>con.getAutoCommit</tt> and <tt>con.getMetaData</tt> methods. </p>
<hr><p><b>Note - </b>Many JDBC drivers cache the results of these calls. As a result, using these calls might not always provide reliable validations. Check with the driver vendor to determine whether these calls are cached or not.</p>
<hr>
</dd>
<dt>Table</dt>
<dd><p>The application queries the specified database table. The table must exist and be accessible, but no rows are required. Do not use an existing table that has a large number of rows, or a table that is already frequently accessed.</p></dd>
</dl>
</li>
<li><b>If you selected Table in the Validation Method drop-down list, then type the
name of the database table in the Table Name field.</b><p>The table name must contain only alphanumeric, underscore, dash, or dot characters.</p></li>
<li><b>Select the Close All Connections On Any Failure checkbox to have the server
close all connections in the pool and re-establish them when any connection fails.</b><p>If this checkbox is deselected, individual connections are re-established only when they are
used.</p></li>
<li><b>Select the Allow Non Component Callers Enabled checkbox to allow the pool to
be used by non-component callers.</b><p>Examples of non-component callers include Servlet Filters.</p></li>
<li><b>Select the Non Transactional Connections Enabled checkbox to return non-transactional connections.</b></li>
<li><b>From the Transaction Isolation Level drop-down list, select a transaction isolation level for
this connection pool.</b><p>If not specified, the connections operate with default isolation levels provided by the
JDBC driver.</p></li>
<li><b>The Isolation Level Guaranteed checkbox is only applicable if a transaction isolation level
has been specified in step 20.</b><p>If the Guaranteed checkbox is selected, then all connections taken from the pool have
the same isolation level. For example, if the isolation level for the connection
is changed programmatically (with <tt>con.setTransactionIsolation</tt>) when last used, this mechanism changes the
status back to the specified isolation level.</p></li>
<li>(Optional) <b>In the Additional Properties section, specify additional properties.</b><p>Examples of required properties include database name (URL), user name, and password. For
information on available properties, see <a href="ref-jdbc-properties.html">Properties Specific to JDBC Connection Pools</a>.</p><ul>
<li><b>To add a property, click the Add Property button. In the blank row
that appears, type the property name in the Name field, and type
the property value in the Value field.</b></li>
<li><b>To modify a property, edit that property's Value field.</b></li>
<li><b>To delete a property, select the checkbox to the left of the
Name field of the property that you are deleting, then click the Delete
Properties button.</b></li></ul></li>
<li><b>Click Finish.</b></li></ol><h6>See Also</h6>
<ul><li><p><a href="task-setdbaccess.html">To Set Up Database Access</a></p></li>
<li><p><a href="task-integratejdbcdriver.html">To Integrate a JDBC Driver</a></p></li>
<li><p><a href="task-jdbcresourcenew.html">To Create a JDBC Resource</a></p></li>
<li><p><a href="task-jdbcresourcesedit.html">To Edit a JDBC Resource</a></p></li>
<li><p><a href="task-jdbcresourcesdelete.html">To Delete a JDBC Resource</a></p></li>
<li><p><a href="task-jdbcconnectionpooledit.html">To Edit JDBC Connection Pool General Settings</a></p></li>
<li><p><a href="task-jdbcconnectionpooladvance.html">To Edit JDBC Connection Pool Advanced Attributes</a></p></li>
<li><p><a href="task-verifyconnpoolsettings.html">To Verify Connection Pool Settings</a></p></li>
<li><p><a href="task-jdbcconnectionpoolproperty.html">To Edit the JDBC Connection Pool Properties</a></p></li>
<li><p><a href="task-jdbcconnectionpooldelete.html">To Delete a JDBC Connection Pool</a></p></li></ul>

<br/>

</body>
</html>
